# 변수

### table of contents

- [변수의 할당, 참조](#변수의-할당-참조)

- [변수의-선언](#변수의-선언)

- [값의-재할당](#값의-재할당)

- 변수는 값을 저장하기 위해 할당된 `메모리 공간을 식별하기 위해 붙인 이름` 이다. 즉 값의 위치를 가리키는 상징적인 이름이다.

## 변수의 할당, 참조

- **할당(assignment)** - **대입** 이라고도 하며, 지정된 메모리 주소에 있는 메모리 공간에 값을 저장하는 과정.

- **참조(reference)** - **식별자(identifier)** 를 통해 지정된 메모리 공간에 저장된 값을 읽어 오는 과정.

## 변수의 선언

- 변수 선언이란 변수를 생성하는 것이다.

- JS 엔진은 변수 선언을 총 2단계를 걸쳐 진행한다.

  1. **선언(declaration)** 단계 - 변수의 이름을 결정해 생성한 후 JS엔진에 변수의 존재를 알림.

  2. **초기화(Initialization) 단계** - 값 저장을 위한 메모리 공간을 확보한 후 암묵적으로 `undefined` 값을 할당한다.

- 즉 JS환경에서 변수 선언 `(var 선언의 경우)` 은 기본적으로 선언과 동시에 undeifined 초기화가 진행된다.

  - 따라서 초기화 되지 않은 메모리 참조로 인한 쓰레기 값을 참조할 일은 없다.

- var x -> 메모리 공간 확보(allocate) -> 변수 이름과 메모리 주소 **연결(name binding)**

  - 식별자와 메모리 주소가 매핑된 정보는 **스코프(Scope)** 와 **실행 컨텍스트(Execution context)** 에 의해 관리된다.

- 초기화는 최초로 값을 할당하는 과정이므로, var는 처음에 undefined 암묵적 초기화 할당이 됨

`따라서 Js에서 값을 할당 하는 표현식(expression)은 엄밀히 말하면 재할당이다.`

### 선언(declaration) vs 정의(definition)

- ECMA spec에서 변수는 `선언` 하고, 함수는 `정의` 한다.

- 본질적으로 JS환경에서 변수에 대해 선언과 정의의 구분은 모호하다.

  - C 언어에서는 선언과 정의는`실제로 메모리 주소(공간)을 할당하는가` 에 따라 구분된다.

  - 식별자의 존재만 알리는 것은 선언(declaration)이다.

  - 메모리 주소(값이 저장될 수 있는 공간)을 할당하는 것은 정의(definition)다.

- JS에서는 변수 식별자를 정의하면 암묵적으로 [undefined](./4.data-type.md#undefined) 값이 할당되기 때문에 전체적으로 보면 정의라고 할 수 있긴 하다. `하지만 undefined의 의미가 '정의되지 않은' 이라는 뜻이므로 정의되지 않았다고 가정하는 것 같다.`

## 값의 재할당

- JS환경에서 원시값의 재할당이 발생하면 기존 값이 저장된 메모리 공간이 아닌 새로운 메모리 공간에 값이 재할당된다

- JS는 C 언어 처럼 메모리를 직접 제어할 수 있는 unmanaged language가 아닌, 메모리를 제어할 수 없는, 제어 할 필요 없는 **managed language** 언어다. 즉 JS는 **garbage collector** 기능이 내장된 언어다.

  - JS에서 값의 재할당 등 여러 이유로 인해 참조되지 않은 메모리 공간(어떠한 식별자도 참조하지 않는 메모리 공간)은 garbage collector 기능에 의해 해제(release)된다.

  - 또한 개발자가 직접 명시적으로 메모리를 할당하고 해제할 수 없다.

`ECMA spec 에서 메모리 관리에 대한 정확한 규정이 명시되어 있지 않다. 따라서 스택, 힙과 같이 추상적으로 메모리공간을 나누거나 하지 않는다.`
